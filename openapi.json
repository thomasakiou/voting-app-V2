{"openapi":"3.1.0","info":{"title":"Python Voting API","version":"0.1.0"},"servers":[{"url":"/api"}],"paths":{"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/app":{"get":{"summary":"App Status","operationId":"app_status_app_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/users/admin":{"post":{"tags":["Users"],"summary":"Create Admin User","operationId":"create_admin_user_users_admin_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/voter":{"post":{"tags":["Users"],"summary":"Create Voter User","operationId":"create_voter_user_users_voter_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/upload-csv":{"post":{"tags":["Users"],"summary":"Upload Voters Csv","operationId":"upload_voters_csv_users_upload_csv_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_voters_csv_users_upload_csv_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/":{"get":{"tags":["Users"],"summary":"Get All Users","operationId":"get_all_users_users__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserOut"},"type":"array","title":"Response Get All Users Users  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/{username}":{"get":{"tags":["Users"],"summary":"Get User","operationId":"get_user_users__username__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string","title":"Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{id}":{"delete":{"tags":["Users"],"summary":"Delete User","operationId":"delete_user_users__id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/status":{"patch":{"tags":["Users"],"summary":"Toggle Active Status","operationId":"toggle_active_status_users__user_id__status_patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}},{"name":"is_active","in":"query","required":true,"schema":{"type":"boolean","title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/disable-voters":{"patch":{"tags":["Users"],"summary":"Disable All Voters","operationId":"disable_all_voters_users_disable_voters_patch","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/enable-voters":{"patch":{"tags":["Users"],"summary":"Enable All Voters","operationId":"enable_all_voters_users_enable_voters_patch","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/change-password":{"post":{"tags":["Change Password"],"summary":"Change Password","operationId":"change_password_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/reset-password/{username}":{"post":{"tags":["Reset Password"],"summary":"Reset Password","operationId":"reset_password_reset_password__username__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/login":{"post":{"tags":["Login"],"summary":"Login","operationId":"login_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/logout":{"post":{"tags":["Logout"],"summary":"Logout","operationId":"logout_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/candidates/":{"get":{"tags":["Candidates"],"summary":"Get All Candidates","operationId":"get_all_candidates_candidates__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CandidateResponse"},"type":"array","title":"Response Get All Candidates Candidates  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Candidates"],"summary":"Create Candidate","operationId":"create_candidate_candidates__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/candidates/{office_code}/candidates":{"get":{"tags":["Candidates"],"summary":"Get Candidates By Office Code","operationId":"get_candidates_by_office_code_candidates__office_code__candidates_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"office_code","in":"path","required":true,"schema":{"type":"string","title":"Office Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CandidateResponse"},"title":"Response Get Candidates By Office Code Candidates  Office Code  Candidates Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/candidates/{candidate_code}":{"get":{"tags":["Candidates"],"summary":"Get Candidate By Code","operationId":"get_candidate_by_code_candidates__candidate_code__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/candidates/{id}":{"delete":{"tags":["Candidates"],"summary":"Delete Candidate","operationId":"delete_candidate_candidates__id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Candidates"],"summary":"Update Candidate","operationId":"update_candidate_candidates__id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/offices/":{"get":{"tags":["Offices"],"summary":"Get All Offices","operationId":"get_all_offices_offices__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/OfficeResponse"},"type":"array","title":"Response Get All Offices Offices  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Offices"],"summary":"Create Office","operationId":"create_office_offices__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfficeCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfficeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/offices/{candidate_code}":{"get":{"tags":["Offices"],"summary":"Get Candidate By Code","operationId":"get_candidate_by_code_offices__candidate_code__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfficeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/offices/{id}":{"delete":{"tags":["Offices"],"summary":"Delete Candidate","operationId":"delete_candidate_offices__id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Offices"],"summary":"Update Office","operationId":"update_office_offices__id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfficeUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OfficeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/votes/":{"get":{"tags":["Votes"],"summary":"Get All Votes","operationId":"get_all_votes_votes__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/VoteResponse"},"type":"array","title":"Response Get All Votes Votes  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Votes"],"summary":"Cast Vote","operationId":"cast_vote_votes__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoteCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VoteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/votes/{userId}":{"get":{"tags":["Votes"],"summary":"Get Vote By User Id","operationId":"get_vote_by_user_id_votes__userId__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","title":"Userid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VoteResponse"},"title":"Response Get Vote By User Id Votes  Userid  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/votes/{username}":{"get":{"tags":["Votes"],"summary":"Get Vote By User","operationId":"get_vote_by_user_votes__username__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VoteResponse"},"title":"Response Get Vote By User Votes  Username  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/votes/code/{code}":{"get":{"tags":["Votes"],"summary":"Get Vote By Code","operationId":"get_vote_by_code_votes_code__code__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VoteResponse"},"title":"Response Get Vote By Code Votes Code  Code  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/results/{office_code}":{"get":{"tags":["Results"],"summary":"Count Votes","operationId":"count_votes_results__office_code__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"office_code","in":"path","required":true,"schema":{"type":"string","title":"Office Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/config":{"get":{"tags":["Config"],"summary":"Get Config","operationId":"get_config_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_login_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_login_post"},"Body_upload_voters_csv_users_upload_csv_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_voters_csv_users_upload_csv_post"},"CandidateCreate":{"properties":{"candidate_code":{"type":"string","title":"Candidate Code"},"name":{"type":"string","title":"Name"},"office_code":{"type":"string","title":"Office Code"}},"type":"object","required":["candidate_code","name","office_code"],"title":"CandidateCreate"},"CandidateResponse":{"properties":{"candidate_code":{"type":"string","title":"Candidate Code"},"name":{"type":"string","title":"Name"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"office":{"$ref":"#/components/schemas/OfficeOut"}},"type":"object","required":["candidate_code","name","id","created_at","office"],"title":"CandidateResponse"},"ChangePasswordRequest":{"properties":{"username":{"type":"string","title":"Username"},"old_password":{"type":"string","title":"Old Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["username","old_password","new_password"],"title":"ChangePasswordRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"OfficeCreate":{"properties":{"office_code":{"type":"string","title":"Office Code"},"description":{"type":"string","title":"Description"}},"type":"object","required":["office_code","description"],"title":"OfficeCreate"},"OfficeOut":{"properties":{"office_code":{"type":"string","title":"Office Code"},"description":{"type":"string","title":"Description"}},"type":"object","required":["office_code","description"],"title":"OfficeOut"},"OfficeResponse":{"properties":{"office_code":{"type":"string","title":"Office Code"},"description":{"type":"string","title":"Description"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["office_code","description","id","created_at"],"title":"OfficeResponse"},"OfficeUpdate":{"properties":{"office_code":{"type":"string","title":"Office Code"},"description":{"type":"string","title":"Description"}},"type":"object","required":["office_code","description"],"title":"OfficeUpdate"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"UserCreate":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"UserCreate"},"UserOut":{"properties":{"username":{"type":"string","title":"Username"},"full_name":{"type":"string","title":"Full Name"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"id":{"type":"integer","title":"Id"},"role":{"$ref":"#/components/schemas/UserRole"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","default":true}},"type":"object","required":["username","full_name","id","role"],"title":"UserOut"},"UserRole":{"type":"string","enum":["super-admin","admin","voter"],"title":"UserRole"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VoteCreate":{"properties":{"candidate_code":{"type":"string","title":"Candidate Code"},"office_code":{"type":"string","title":"Office Code"}},"type":"object","required":["candidate_code","office_code"],"title":"VoteCreate"},"VoteResponse":{"properties":{"id":{"type":"integer","title":"Id"},"user_name":{"type":"string","title":"User Name"},"candidate_name":{"type":"string","title":"Candidate Name"},"office_name":{"type":"string","title":"Office Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","user_name","candidate_name","office_name","created_at"],"title":"VoteResponse"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"api/login"}}}}}}